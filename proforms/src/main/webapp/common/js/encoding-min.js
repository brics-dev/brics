"undefined"!=typeof module&&module.exports&&(this["encoding-indexes"]=require("./encoding-indexes.js")["encoding-indexes"]),function(global){"use strict";function inRange(a,min,max){return min<=a&&a<=max}function includes(array,item){return array.indexOf(item)!==-1}function ToDictionary(o){if(void 0===o)return{};if(o===Object(o))return o;throw TypeError("Could not convert argument to dictionary")}function stringToCodePoints(string){for(var s=String(string),n=s.length,i=0,u=[];i<n;){var c=s.charCodeAt(i);if(c<55296||c>57343)u.push(c);else if(56320<=c&&c<=57343)u.push(65533);else if(55296<=c&&c<=56319)if(i===n-1)u.push(65533);else{var d=s.charCodeAt(i+1);if(56320<=d&&d<=57343){var a=1023&c,b=1023&d;u.push(65536+(a<<10)+b),i+=1}else u.push(65533)}i+=1}return u}function codePointsToString(code_points){for(var s="",i=0;i<code_points.length;++i){var cp=code_points[i];cp<=65535?s+=String.fromCharCode(cp):(cp-=65536,s+=String.fromCharCode((cp>>10)+55296,(1023&cp)+56320))}return s}function isASCIIByte(a){return 0<=a&&a<=127}function Stream(tokens){this.tokens=[].slice.call(tokens),this.tokens.reverse()}function decoderError(fatal,opt_code_point){if(fatal)throw TypeError("Decoder error");return opt_code_point||65533}function encoderError(code_point){throw TypeError("The code point "+code_point+" could not be encoded.")}function Decoder(){}function Encoder(){}function getEncoding(label){return label=String(label).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(label_to_encoding,label)?label_to_encoding[label]:null}function indexCodePointFor(pointer,index){return index?index[pointer]||null:null}function indexPointerFor(code_point,index){var pointer=index.indexOf(code_point);return pointer===-1?null:pointer}function index(name){if(!("encoding-indexes"in global))throw Error("Indexes missing. Did you forget to include encoding-indexes.js?");return global["encoding-indexes"][name]}function indexGB18030RangesCodePointFor(pointer){if(pointer>39419&&pointer<189e3||pointer>1237575)return null;if(7457===pointer)return 59335;var i,offset=0,code_point_offset=0,idx=index("gb18030-ranges");for(i=0;i<idx.length;++i){var entry=idx[i];if(!(entry[0]<=pointer))break;offset=entry[0],code_point_offset=entry[1]}return code_point_offset+pointer-offset}function indexGB18030RangesPointerFor(code_point){if(59335===code_point)return 7457;var i,offset=0,pointer_offset=0,idx=index("gb18030-ranges");for(i=0;i<idx.length;++i){var entry=idx[i];if(!(entry[1]<=code_point))break;offset=entry[1],pointer_offset=entry[0]}return pointer_offset+code_point-offset}function indexShiftJISPointerFor(code_point){shift_jis_index=shift_jis_index||index("jis0208").map(function(code_point,pointer){return inRange(pointer,8272,8835)?null:code_point});var index_=shift_jis_index;return index_.indexOf(code_point)}function indexBig5PointerFor(code_point){big5_index_no_hkscs=big5_index_no_hkscs||index("big5").map(function(code_point,pointer){return pointer<5024?null:code_point});var index_=big5_index_no_hkscs;return 9552===code_point||9566===code_point||9569===code_point||9578===code_point||21313===code_point||21317===code_point?index_.lastIndexOf(code_point):indexPointerFor(code_point,index_)}function TextDecoder(label,options){if(!(this instanceof TextDecoder))throw TypeError("Called as a function. Did you forget 'new'?");label=void 0!==label?String(label):DEFAULT_ENCODING,options=ToDictionary(options),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var encoding=getEncoding(label);if(null===encoding||"replacement"===encoding.name)throw RangeError("Unknown encoding: "+label);if(!decoders[encoding.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js?");var dec=this;return dec._encoding=encoding,Boolean(options.fatal)&&(dec._error_mode="fatal"),Boolean(options.ignoreBOM)&&(dec._ignoreBOM=!0),Object.defineProperty||(this.encoding=dec._encoding.name.toLowerCase(),this.fatal="fatal"===dec._error_mode,this.ignoreBOM=dec._ignoreBOM),dec}function TextEncoder(label,options){if(!(this instanceof TextEncoder))throw TypeError("Called as a function. Did you forget 'new'?");options=ToDictionary(options),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=Boolean(options.fatal)?"fatal":"replacement";var enc=this;if(Boolean(options.NONSTANDARD_allowLegacyEncoding)){label=void 0!==label?String(label):DEFAULT_ENCODING;var encoding=getEncoding(label);if(null===encoding||"replacement"===encoding.name)throw RangeError("Unknown encoding: "+label);if(!encoders[encoding.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js?");enc._encoding=encoding}else enc._encoding=getEncoding("utf-8"),void 0!==label&&"console"in global&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=enc._encoding.name.toLowerCase()),enc}function UTF8Decoder(options){var fatal=options.fatal,utf8_code_point=0,utf8_bytes_seen=0,utf8_bytes_needed=0,utf8_lower_boundary=128,utf8_upper_boundary=191;this.handler=function(stream,bite){if(bite===end_of_stream&&0!==utf8_bytes_needed)return utf8_bytes_needed=0,decoderError(fatal);if(bite===end_of_stream)return finished;if(0===utf8_bytes_needed){if(inRange(bite,0,127))return bite;if(inRange(bite,194,223))utf8_bytes_needed=1,utf8_code_point=31&bite;else if(inRange(bite,224,239))224===bite&&(utf8_lower_boundary=160),237===bite&&(utf8_upper_boundary=159),utf8_bytes_needed=2,utf8_code_point=15&bite;else{if(!inRange(bite,240,244))return decoderError(fatal);240===bite&&(utf8_lower_boundary=144),244===bite&&(utf8_upper_boundary=143),utf8_bytes_needed=3,utf8_code_point=7&bite}return null}if(!inRange(bite,utf8_lower_boundary,utf8_upper_boundary))return utf8_code_point=utf8_bytes_needed=utf8_bytes_seen=0,utf8_lower_boundary=128,utf8_upper_boundary=191,stream.prepend(bite),decoderError(fatal);if(utf8_lower_boundary=128,utf8_upper_boundary=191,utf8_code_point=utf8_code_point<<6|63&bite,utf8_bytes_seen+=1,utf8_bytes_seen!==utf8_bytes_needed)return null;var code_point=utf8_code_point;return utf8_code_point=utf8_bytes_needed=utf8_bytes_seen=0,code_point}}function UTF8Encoder(options){options.fatal;this.handler=function(stream,code_point){if(code_point===end_of_stream)return finished;if(isASCIICodePoint(code_point))return code_point;var count,offset;inRange(code_point,128,2047)?(count=1,offset=192):inRange(code_point,2048,65535)?(count=2,offset=224):inRange(code_point,65536,1114111)&&(count=3,offset=240);for(var bytes=[(code_point>>6*count)+offset];count>0;){var temp=code_point>>6*(count-1);bytes.push(128|63&temp),count-=1}return bytes}}function SingleByteDecoder(index,options){var fatal=options.fatal;this.handler=function(stream,bite){if(bite===end_of_stream)return finished;if(isASCIIByte(bite))return bite;var code_point=index[bite-128];return null===code_point?decoderError(fatal):code_point}}function SingleByteEncoder(index,options){options.fatal;this.handler=function(stream,code_point){if(code_point===end_of_stream)return finished;if(isASCIICodePoint(code_point))return code_point;var pointer=indexPointerFor(code_point,index);return null===pointer&&encoderError(code_point),pointer+128}}function GB18030Decoder(options){var fatal=options.fatal,gb18030_first=0,gb18030_second=0,gb18030_third=0;this.handler=function(stream,bite){if(bite===end_of_stream&&0===gb18030_first&&0===gb18030_second&&0===gb18030_third)return finished;bite!==end_of_stream||0===gb18030_first&&0===gb18030_second&&0===gb18030_third||(gb18030_first=0,gb18030_second=0,gb18030_third=0,decoderError(fatal));var code_point;if(0!==gb18030_third){code_point=null,inRange(bite,48,57)&&(code_point=indexGB18030RangesCodePointFor(10*(126*(10*(gb18030_first-129)+gb18030_second-48)+gb18030_third-129)+bite-48));var buffer=[gb18030_second,gb18030_third,bite];return gb18030_first=0,gb18030_second=0,gb18030_third=0,null===code_point?(stream.prepend(buffer),decoderError(fatal)):code_point}if(0!==gb18030_second)return inRange(bite,129,254)?(gb18030_third=bite,null):(stream.prepend([gb18030_second,bite]),gb18030_first=0,gb18030_second=0,decoderError(fatal));if(0!==gb18030_first){if(inRange(bite,48,57))return gb18030_second=bite,null;var lead=gb18030_first,pointer=null;gb18030_first=0;var offset=bite<127?64:65;return(inRange(bite,64,126)||inRange(bite,128,254))&&(pointer=190*(lead-129)+(bite-offset)),code_point=null===pointer?null:indexCodePointFor(pointer,index("gb18030")),null===code_point&&isASCIIByte(bite)&&stream.prepend(bite),null===code_point?decoderError(fatal):code_point}return isASCIIByte(bite)?bite:128===bite?8364:inRange(bite,129,254)?(gb18030_first=bite,null):decoderError(fatal)}}function GB18030Encoder(options,gbk_flag){options.fatal;this.handler=function(stream,code_point){if(code_point===end_of_stream)return finished;if(isASCIICodePoint(code_point))return code_point;if(58853===code_point)return encoderError(code_point);if(gbk_flag&&8364===code_point)return 128;var pointer=indexPointerFor(code_point,index("gb18030"));if(null!==pointer){var lead=floor(pointer/190)+129,trail=pointer%190,offset=trail<63?64:65;return[lead,trail+offset]}if(gbk_flag)return encoderError(code_point);pointer=indexGB18030RangesPointerFor(code_point);var byte1=floor(pointer/10/126/10);pointer-=10*byte1*126*10;var byte2=floor(pointer/10/126);pointer-=10*byte2*126;var byte3=floor(pointer/10),byte4=pointer-10*byte3;return[byte1+129,byte2+48,byte3+129,byte4+48]}}function Big5Decoder(options){var fatal=options.fatal,Big5_lead=0;this.handler=function(stream,bite){if(bite===end_of_stream&&0!==Big5_lead)return Big5_lead=0,decoderError(fatal);if(bite===end_of_stream&&0===Big5_lead)return finished;if(0!==Big5_lead){var lead=Big5_lead,pointer=null;Big5_lead=0;var offset=bite<127?64:98;switch((inRange(bite,64,126)||inRange(bite,161,254))&&(pointer=157*(lead-129)+(bite-offset)),pointer){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}var code_point=null===pointer?null:indexCodePointFor(pointer,index("big5"));return null===code_point&&isASCIIByte(bite)&&stream.prepend(bite),null===code_point?decoderError(fatal):code_point}return isASCIIByte(bite)?bite:inRange(bite,129,254)?(Big5_lead=bite,null):decoderError(fatal)}}function Big5Encoder(options){options.fatal;this.handler=function(stream,code_point){if(code_point===end_of_stream)return finished;if(isASCIICodePoint(code_point))return code_point;var pointer=indexBig5PointerFor(code_point);if(null===pointer)return encoderError(code_point);var lead=floor(pointer/157)+129;if(lead<161)return encoderError(code_point);var trail=pointer%157,offset=trail<63?64:98;return[lead,trail+offset]}}function EUCJPDecoder(options){var fatal=options.fatal,eucjp_jis0212_flag=!1,eucjp_lead=0;this.handler=function(stream,bite){if(bite===end_of_stream&&0!==eucjp_lead)return eucjp_lead=0,decoderError(fatal);if(bite===end_of_stream&&0===eucjp_lead)return finished;if(142===eucjp_lead&&inRange(bite,161,223))return eucjp_lead=0,65216+bite;if(143===eucjp_lead&&inRange(bite,161,254))return eucjp_jis0212_flag=!0,eucjp_lead=bite,null;if(0!==eucjp_lead){var lead=eucjp_lead;eucjp_lead=0;var code_point=null;return inRange(lead,161,254)&&inRange(bite,161,254)&&(code_point=indexCodePointFor(94*(lead-161)+(bite-161),index(eucjp_jis0212_flag?"jis0212":"jis0208"))),eucjp_jis0212_flag=!1,inRange(bite,161,254)||stream.prepend(bite),null===code_point?decoderError(fatal):code_point}return isASCIIByte(bite)?bite:142===bite||143===bite||inRange(bite,161,254)?(eucjp_lead=bite,null):decoderError(fatal)}}function EUCJPEncoder(options){options.fatal;this.handler=function(stream,code_point){if(code_point===end_of_stream)return finished;if(isASCIICodePoint(code_point))return code_point;if(165===code_point)return 92;if(8254===code_point)return 126;if(inRange(code_point,65377,65439))return[142,code_point-65377+161];8722===code_point&&(code_point=65293);var pointer=indexPointerFor(code_point,index("jis0208"));if(null===pointer)return encoderError(code_point);var lead=floor(pointer/94)+161,trail=pointer%94+161;return[lead,trail]}}function ISO2022JPDecoder(options){var fatal=options.fatal,states={ASCII:0,Roman:1,Katakana:2,LeadByte:3,TrailByte:4,EscapeStart:5,Escape:6},iso2022jp_decoder_state=states.ASCII,iso2022jp_decoder_output_state=states.ASCII,iso2022jp_lead=0,iso2022jp_output_flag=!1;this.handler=function(stream,bite){switch(iso2022jp_decoder_state){default:case states.ASCII:return 27===bite?(iso2022jp_decoder_state=states.EscapeStart,null):inRange(bite,0,127)&&14!==bite&&15!==bite&&27!==bite?(iso2022jp_output_flag=!1,bite):bite===end_of_stream?finished:(iso2022jp_output_flag=!1,decoderError(fatal));case states.Roman:return 27===bite?(iso2022jp_decoder_state=states.EscapeStart,null):92===bite?(iso2022jp_output_flag=!1,165):126===bite?(iso2022jp_output_flag=!1,8254):inRange(bite,0,127)&&14!==bite&&15!==bite&&27!==bite&&92!==bite&&126!==bite?(iso2022jp_output_flag=!1,bite):bite===end_of_stream?finished:(iso2022jp_output_flag=!1,decoderError(fatal));case states.Katakana:return 27===bite?(iso2022jp_decoder_state=states.EscapeStart,null):inRange(bite,33,95)?(iso2022jp_output_flag=!1,65344+bite):bite===end_of_stream?finished:(iso2022jp_output_flag=!1,decoderError(fatal));case states.LeadByte:return 27===bite?(iso2022jp_decoder_state=states.EscapeStart,null):inRange(bite,33,126)?(iso2022jp_output_flag=!1,iso2022jp_lead=bite,iso2022jp_decoder_state=states.TrailByte,null):bite===end_of_stream?finished:(iso2022jp_output_flag=!1,decoderError(fatal));case states.TrailByte:if(27===bite)return iso2022jp_decoder_state=states.EscapeStart,decoderError(fatal);if(inRange(bite,33,126)){iso2022jp_decoder_state=states.LeadByte;var pointer=94*(iso2022jp_lead-33)+bite-33,code_point=indexCodePointFor(pointer,index("jis0208"));return null===code_point?decoderError(fatal):code_point}return bite===end_of_stream?(iso2022jp_decoder_state=states.LeadByte,stream.prepend(bite),decoderError(fatal)):(iso2022jp_decoder_state=states.LeadByte,decoderError(fatal));case states.EscapeStart:return 36===bite||40===bite?(iso2022jp_lead=bite,iso2022jp_decoder_state=states.Escape,null):(stream.prepend(bite),iso2022jp_output_flag=!1,iso2022jp_decoder_state=iso2022jp_decoder_output_state,decoderError(fatal));case states.Escape:var lead=iso2022jp_lead;iso2022jp_lead=0;var state=null;if(40===lead&&66===bite&&(state=states.ASCII),40===lead&&74===bite&&(state=states.Roman),40===lead&&73===bite&&(state=states.Katakana),36!==lead||64!==bite&&66!==bite||(state=states.LeadByte),null!==state){iso2022jp_decoder_state=iso2022jp_decoder_state=state;var output_flag=iso2022jp_output_flag;return iso2022jp_output_flag=!0,output_flag?decoderError(fatal):null}return stream.prepend([lead,bite]),iso2022jp_output_flag=!1,iso2022jp_decoder_state=iso2022jp_decoder_output_state,decoderError(fatal)}}}function ISO2022JPEncoder(options){var states=(options.fatal,{ASCII:0,Roman:1,jis0208:2}),iso2022jp_state=states.ASCII;this.handler=function(stream,code_point){if(code_point===end_of_stream&&iso2022jp_state!==states.ASCII)return stream.prepend(code_point),iso2022jp_state=states.ASCII,[27,40,66];if(code_point===end_of_stream&&iso2022jp_state===states.ASCII)return finished;if(!(iso2022jp_state!==states.ASCII&&iso2022jp_state!==states.Roman||14!==code_point&&15!==code_point&&27!==code_point))return encoderError(65533);if(iso2022jp_state===states.ASCII&&isASCIICodePoint(code_point))return code_point;if(iso2022jp_state===states.Roman&&(isASCIICodePoint(code_point)&&92!==code_point&&126!==code_point||165==code_point||8254==code_point)){if(isASCIICodePoint(code_point))return code_point;if(165===code_point)return 92;if(8254===code_point)return 126}if(isASCIICodePoint(code_point)&&iso2022jp_state!==states.ASCII)return stream.prepend(code_point),iso2022jp_state=states.ASCII,[27,40,66];if((165===code_point||8254===code_point)&&iso2022jp_state!==states.Roman)return stream.prepend(code_point),iso2022jp_state=states.Roman,[27,40,74];8722===code_point&&(code_point=65293);var pointer=indexPointerFor(code_point,index("jis0208"));if(null===pointer)return encoderError(code_point);if(iso2022jp_state!==states.jis0208)return stream.prepend(code_point),iso2022jp_state=states.jis0208,[27,36,66];var lead=floor(pointer/94)+33,trail=pointer%94+33;return[lead,trail]}}function ShiftJISDecoder(options){var fatal=options.fatal,Shift_JIS_lead=0;this.handler=function(stream,bite){if(bite===end_of_stream&&0!==Shift_JIS_lead)return Shift_JIS_lead=0,decoderError(fatal);if(bite===end_of_stream&&0===Shift_JIS_lead)return finished;if(0!==Shift_JIS_lead){var lead=Shift_JIS_lead,pointer=null;Shift_JIS_lead=0;var offset=bite<127?64:65,lead_offset=lead<160?129:193;if((inRange(bite,64,126)||inRange(bite,128,252))&&(pointer=188*(lead-lead_offset)+bite-offset),inRange(pointer,8836,10715))return 48508+pointer;var code_point=null===pointer?null:indexCodePointFor(pointer,index("jis0208"));return null===code_point&&isASCIIByte(bite)&&stream.prepend(bite),null===code_point?decoderError(fatal):code_point}return isASCIIByte(bite)||128===bite?bite:inRange(bite,161,223)?65216+bite:inRange(bite,129,159)||inRange(bite,224,252)?(Shift_JIS_lead=bite,null):decoderError(fatal)}}function ShiftJISEncoder(options){options.fatal;this.handler=function(stream,code_point){if(code_point===end_of_stream)return finished;if(isASCIICodePoint(code_point)||128===code_point)return code_point;if(165===code_point)return 92;if(8254===code_point)return 126;if(inRange(code_point,65377,65439))return code_point-65377+161;8722===code_point&&(code_point=65293);var pointer=indexShiftJISPointerFor(code_point);if(null===pointer)return encoderError(code_point);var lead=floor(pointer/188),lead_offset=lead<31?129:193,trail=pointer%188,offset=trail<63?64:65;return[lead+lead_offset,trail+offset]}}function EUCKRDecoder(options){var fatal=options.fatal,euckr_lead=0;this.handler=function(stream,bite){if(bite===end_of_stream&&0!==euckr_lead)return euckr_lead=0,decoderError(fatal);if(bite===end_of_stream&&0===euckr_lead)return finished;if(0!==euckr_lead){var lead=euckr_lead,pointer=null;euckr_lead=0,inRange(bite,65,254)&&(pointer=190*(lead-129)+(bite-65));var code_point=null===pointer?null:indexCodePointFor(pointer,index("euc-kr"));return null===pointer&&isASCIIByte(bite)&&stream.prepend(bite),null===code_point?decoderError(fatal):code_point}return isASCIIByte(bite)?bite:inRange(bite,129,254)?(euckr_lead=bite,null):decoderError(fatal)}}function EUCKREncoder(options){options.fatal;this.handler=function(stream,code_point){if(code_point===end_of_stream)return finished;if(isASCIICodePoint(code_point))return code_point;var pointer=indexPointerFor(code_point,index("euc-kr"));if(null===pointer)return encoderError(code_point);var lead=floor(pointer/190)+129,trail=pointer%190+65;return[lead,trail]}}function convertCodeUnitToBytes(code_unit,utf16be){var byte1=code_unit>>8,byte2=255&code_unit;return utf16be?[byte1,byte2]:[byte2,byte1]}function UTF16Decoder(utf16_be,options){var fatal=options.fatal,utf16_lead_byte=null,utf16_lead_surrogate=null;this.handler=function(stream,bite){if(bite===end_of_stream&&(null!==utf16_lead_byte||null!==utf16_lead_surrogate))return decoderError(fatal);if(bite===end_of_stream&&null===utf16_lead_byte&&null===utf16_lead_surrogate)return finished;if(null===utf16_lead_byte)return utf16_lead_byte=bite,null;var code_unit;if(code_unit=utf16_be?(utf16_lead_byte<<8)+bite:(bite<<8)+utf16_lead_byte,utf16_lead_byte=null,null!==utf16_lead_surrogate){var lead_surrogate=utf16_lead_surrogate;return utf16_lead_surrogate=null,inRange(code_unit,56320,57343)?65536+1024*(lead_surrogate-55296)+(code_unit-56320):(stream.prepend(convertCodeUnitToBytes(code_unit,utf16_be)),decoderError(fatal))}return inRange(code_unit,55296,56319)?(utf16_lead_surrogate=code_unit,null):inRange(code_unit,56320,57343)?decoderError(fatal):code_unit}}function UTF16Encoder(utf16_be,options){options.fatal;this.handler=function(stream,code_point){if(code_point===end_of_stream)return finished;if(inRange(code_point,0,65535))return convertCodeUnitToBytes(code_point,utf16_be);var lead=convertCodeUnitToBytes((code_point-65536>>10)+55296,utf16_be),trail=convertCodeUnitToBytes((code_point-65536&1023)+56320,utf16_be);return lead.concat(trail)}}function XUserDefinedDecoder(options){options.fatal;this.handler=function(stream,bite){return bite===end_of_stream?finished:isASCIIByte(bite)?bite:63360+bite-128}}function XUserDefinedEncoder(options){options.fatal;this.handler=function(stream,code_point){return code_point===end_of_stream?finished:isASCIICodePoint(code_point)?code_point:inRange(code_point,63360,63487)?code_point-63360+128:encoderError(code_point)}}var floor=Math.floor,isASCIICodePoint=isASCIIByte,end_of_stream=-1;Stream.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():end_of_stream},prepend:function(token){if(Array.isArray(token))for(var tokens=token;tokens.length;)this.tokens.push(tokens.pop());else this.tokens.push(token)},push:function(token){if(Array.isArray(token))for(var tokens=token;tokens.length;)this.tokens.unshift(tokens.shift());else this.tokens.unshift(token)}};var finished=-1;Decoder.prototype={handler:function(stream,bite){}},Encoder.prototype={handler:function(stream,code_point){}};var encodings=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],label_to_encoding={};encodings.forEach(function(category){category.encodings.forEach(function(encoding){encoding.labels.forEach(function(label){label_to_encoding[label]=encoding})})});var shift_jis_index,big5_index_no_hkscs,encoders={},decoders={},DEFAULT_ENCODING="utf-8";Object.defineProperty&&(Object.defineProperty(TextDecoder.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(TextDecoder.prototype,"fatal",{get:function(){return"fatal"===this._error_mode}}),Object.defineProperty(TextDecoder.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),TextDecoder.prototype.decode=function(input,options){function serializeStream(stream){return!includes(["UTF-8","UTF-16LE","UTF-16BE"],this._encoding.name)||this._ignoreBOM||this._BOMseen||(stream.length>0&&65279===stream[0]?(this._BOMseen=!0,stream.shift()):stream.length>0&&(this._BOMseen=!0)),codePointsToString(stream)}var bytes;bytes="object"==typeof input&&input instanceof ArrayBuffer?new Uint8Array(input):"object"==typeof input&&"buffer"in input&&input.buffer instanceof ArrayBuffer?new Uint8Array(input.buffer,input.byteOffset,input.byteLength):new Uint8Array(0),options=ToDictionary(options),this._do_not_flush||(this._decoder=decoders[this._encoding.name]({fatal:"fatal"===this._error_mode}),this._BOMseen=!1),this._do_not_flush=Boolean(options.stream);for(var result,input_stream=new Stream(bytes),output=[];;){var token=input_stream.read();if(token===end_of_stream)break;if(result=this._decoder.handler(input_stream,token),result===finished)break;null!==result&&(Array.isArray(result)?output.push.apply(output,result):output.push(result))}if(!this._do_not_flush){do{if(result=this._decoder.handler(input_stream,input_stream.read()),result===finished)break;null!==result&&(Array.isArray(result)?output.push.apply(output,result):output.push(result))}while(!input_stream.endOfStream());this._decoder=null}return serializeStream.call(this,output)},Object.defineProperty&&Object.defineProperty(TextEncoder.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),TextEncoder.prototype.encode=function(opt_string,options){opt_string=opt_string?String(opt_string):"",options=ToDictionary(options),this._do_not_flush||(this._encoder=encoders[this._encoding.name]({fatal:"fatal"===this._fatal})),this._do_not_flush=Boolean(options.stream);for(var result,input=new Stream(stringToCodePoints(opt_string)),output=[];;){var token=input.read();if(token===end_of_stream)break;if(result=this._encoder.handler(input,token),result===finished)break;Array.isArray(result)?output.push.apply(output,result):output.push(result)}if(!this._do_not_flush){for(;;){if(result=this._encoder.handler(input,input.read()),result===finished)break;Array.isArray(result)?output.push.apply(output,result):output.push(result)}this._encoder=null}return new Uint8Array(output)},encoders["UTF-8"]=function(options){return new UTF8Encoder(options)},decoders["UTF-8"]=function(options){return new UTF8Decoder(options)},function(){"encoding-indexes"in global&&encodings.forEach(function(category){"Legacy single-byte encodings"===category.heading&&category.encodings.forEach(function(encoding){var name=encoding.name,idx=index(name.toLowerCase());decoders[name]=function(options){return new SingleByteDecoder(idx,options)},encoders[name]=function(options){return new SingleByteEncoder(idx,options)}})})}(),decoders.GBK=function(options){return new GB18030Decoder(options)},encoders.GBK=function(options){return new GB18030Encoder(options,!0)},encoders.gb18030=function(options){return new GB18030Encoder(options)},decoders.gb18030=function(options){return new GB18030Decoder(options)},encoders.Big5=function(options){return new Big5Encoder(options)},decoders.Big5=function(options){return new Big5Decoder(options)},encoders["EUC-JP"]=function(options){return new EUCJPEncoder(options)},decoders["EUC-JP"]=function(options){return new EUCJPDecoder(options)},encoders["ISO-2022-JP"]=function(options){return new ISO2022JPEncoder(options)},decoders["ISO-2022-JP"]=function(options){return new ISO2022JPDecoder(options)},encoders.Shift_JIS=function(options){return new ShiftJISEncoder(options)},decoders.Shift_JIS=function(options){return new ShiftJISDecoder(options)},encoders["EUC-KR"]=function(options){return new EUCKREncoder(options)},decoders["EUC-KR"]=function(options){return new EUCKRDecoder(options)},encoders["UTF-16BE"]=function(options){return new UTF16Encoder(!0,options)},decoders["UTF-16BE"]=function(options){return new UTF16Decoder(!0,options)},encoders["UTF-16LE"]=function(options){return new UTF16Encoder(!1,options)},decoders["UTF-16LE"]=function(options){return new UTF16Decoder(!1,options)},encoders["x-user-defined"]=function(options){return new XUserDefinedEncoder(options)},decoders["x-user-defined"]=function(options){return new XUserDefinedDecoder(options)},global.TextEncoder||(global.TextEncoder=TextEncoder),global.TextDecoder||(global.TextDecoder=TextDecoder),"undefined"!=typeof module&&module.exports&&(module.exports={TextEncoder:global.TextEncoder,TextDecoder:global.TextDecoder,EncodingIndexes:global["encoding-indexes"]})}(this);
